<!DOCTYPE html>
<html>
<head>
  <title>Timeline small tests | anime.js</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link href="assets/css/styles.css" rel="stylesheet">
  <style>
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      position: absolute;
      overflow: hidden;
      width: 100%;
      height: 100%;
    }
    #test-wrapper {
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      padding: 2rem;
      max-width: 32rem;
    }
    #timeline-test {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 2rem;
    }
    #progress-bar {
      width: 100%;
    }
    .square {
      position: relative;
    }
  </style>
</head>
<body>
  <div id="test-wrapper">
    <div id="timeline-test">
      <div id="square-1" class="square red"></div>
    </div>
  </div>
  <script type="module">
    import anime from '../../src/anime.js';
    // import anime from './assets/anime.3.2.1.js';
    import { test, expect } from './assets/js/tests.js';
    import { createGUI } from './assets/js/anime.gui.js';

    const targetEl = document.querySelector('#square-1');

    // const tl = anime.timeline({
    //   easing: 'easeInOutQuad',
    //   duration: 4000,
    //   // direction: 'alternate',
    //   loop: 42,
    //   autoplay: true,
    // })
    // .add({
    //   targets: targetEl,
    //   left: [{value: 200},{value: 400}],
    //   scaleY: [{value: 1},{value: 3}],
    //   delay: 500,
    //   endDelay: 500,
    // })
    // .add({
    //   targets: targetEl,
    //   left: {value: -200},
    //   scaleY: {value: 2},
    //   duration: 8000,
    //   delay: 500,
    //   endDelay: 500,
    // }, '-=2500')
    // .add({
    //   targets: targetEl,
    //   left: [{value: 200},{value: 400}],
    //   scaleY: [{value: 1},{value: 3}],
    //   delay: 500,
    //   endDelay: 500,
    //   complete() {
    //   tl.children[2].tweens.forEach(tween => {
    //     if (tween.previous) {
    //       tween.previous.next = tween.next;
    //     }
    //     if (tween.next) {
    //       tween.next.previous = tween.previous;
    //     }
    //   })
    //   tl.children.splice(2, 1);
    //   tl._childrenLength= 2;
    //   }
    // }, '-=6000')

    const tl = anime.timeline({
      easing: 'easeInOutQuad',
      duration: 4000,
      direction: 'alternate',
      // loop: 42,
      autoplay: true,
    })
    .add({
      targets: targetEl,
      left: [{value: 200},{value: 400}],
      scaleY: [{value: 1},{value: 3}],
      delay: 500,
      endDelay: 500,
    })
    .add({
      targets: targetEl,
      left: {value: -200},
      scaleY: {value: 2},
      backgroundColor: {value: '#FFF', duration: 1000 },
      duration: 8000,
      delay: 500,
      endDelay: 500,
    }, '-=2500')
    .add({
      targets: targetEl,
      left: [{value: 200}, {value: 400}],
      scaleY: [{value: 1}, {value: 3}],
      backgroundColor: {value: '#5A87FF', delay: 0, duration: 1000, endDelay: 0, },
      delay: 500,
      endDelay: 500,
      complete() {
        tl.children[2].tweens.forEach(tween => {
          if (tween.previous) {
            tween.previous.next = tween.next;
          }
          if (tween.next) {
            tween.next.previous = tween.previous;
          }
        })
        tl.children.splice(2, 1);
        tl._childrenLength= 2;
      }
    }, '-=6000')

    createGUI(tl);

    // tl.seek(10000);

    // tl.play();

    // tl.seek(10750);

  </script>
</body>
</html>
